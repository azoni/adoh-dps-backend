weapons = {
  'Shuriken': {'base_damage': 2, 'type':'p', 'size':'t', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 2},
  'Darts': {'base_damage': 2.5, 'type':'p', 'size':'t', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Kukri': {'base_damage': 2.5, 'type':'s', 'size':'t', 'crit':1, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Dagger': {'base_damage': 2.5, 'type':'p', 'size':'t', 'crit':2, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Mace': {'base_damage': 3.5, 'type':'b', 'size':'s', 'crit':3, 'feat': 1, 'is_ugly':2, 'is_monk': 1},
  'Sickle': {'base_damage': 3.5, 'type':'s', 'size':'s', 'crit':3, 'feat': 1, 'is_ugly':2, 'is_monk': 1},
  'Whip': {'base_damage': 3.5, 'type':'s', 'size':'s', 'crit':3, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Kama': {'base_damage': 3.5, 'type':'s', 'size':'s', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 2},
  'Bullets': {'base_damage': 3.5, 'type':'b', 'size':'s', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Light Hammer': {'base_damage': 3.5, 'type':'b', 'size':'s', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  # 'Sling': {'base_damage': 3.5, 'type':'b', 'size':'s', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Throwing Axes': {'base_damage': 3.5, 'type':'s', 'size':'s', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Handaxe': {'base_damage': 3.5, 'type':'s', 'size':'s', 'crit':4, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Shortsword': {'base_damage': 3.5, 'type':'p', 'size':'s', 'crit':2, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Dire Mace': {'base_damage': 4.5, 'type':'b', 'size':'m', 'crit':3, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Club': {'base_damage': 3.5, 'type':'b', 'size':'m', 'crit':3, 'feat': 1, 'is_ugly':2, 'is_monk': 1},
  'Light Flail': {'base_damage': 4.5, 'type':'b', 'size':'m', 'crit':3, 'feat': 1, 'is_ugly':2, 'is_monk': 1},
  'Morningstar': {'base_damage': 4.5, 'type':'b/p', 'size':'m', 'crit':3, 'feat': 1, 'is_ugly':2, 'is_monk': 1},
  'Gloves': {'base_damage': 3.5, 'type':'b', 'size':'m', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 2},
  # 'Staff': {'base_damage': 3.5, 'type':'b', 'size':'m', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Double Axe': {'base_damage': 4.5, 'type':'s', 'size':'m', 'crit':4, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Two-Bladed Sword': {'base_damage': 4.5, 'type':'s', 'size':'m', 'crit':2, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Bastard Sword': {'base_damage': 5.5, 'type':'s', 'size':'m', 'crit':2, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Bolts': {'base_damage': 4.5, 'type':'p', 'size':'m', 'crit':1, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Dwarven Waraxe': {'base_damage': 5.5, 'type':'s', 'size':'m', 'crit':4, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Katana': {'base_damage': 5.5, 'type':'s', 'size':'m', 'crit':2, 'feat': 3, 'is_ugly':1, 'is_monk': 1},
  'Quarterstaff': {'base_damage': 3.5, 'type':'b', 'size':'l', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 2},
  'Arrows': {'base_damage': 3.5, 'type':'p', 'size':'m', 'crit':4, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Battleaxe': {'base_damage': 4.5, 'type':'s', 'size':'m', 'crit':4, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Longsword': {'base_damage': 4.5, 'type':'s', 'size':'m', 'crit':2, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Rapier': {'base_damage': 3.5, 'type':'p', 'size':'m', 'crit':1, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Scimitar': {'base_damage': 3.5, 'type':'s', 'size':'m', 'crit':1, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Warhammer': {'base_damage': 4.5, 'type':'b', 'size':'m', 'crit':4, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Trident': {'base_damage': 4.5, 'type':'p', 'size':'l', 'crit':3, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Greataxe': {'base_damage': 6.5, 'type':'s', 'size':'l', 'crit':4, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Greatsword': {'base_damage': 7, 'type':'s', 'size':'l', 'crit':2, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Halberd': {'base_damage': 5.5, 'type':'s/p', 'size':'l', 'crit':4, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Heavy Flail': {'base_damage': 5.5, 'type':'b', 'size':'l', 'crit':2, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Spear': {'base_damage': 4.5, 'type':'p', 'size':'l', 'crit':4, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
  'Scythe': {'base_damage': 5, 'type':'s/p', 'size':'l', 'crit':5, 'feat': 1, 'is_ugly':1, 'is_monk': 1},
}

damage_weights = { #3d12 = 19 | 1d12 + 1d6 == 4d4 2-18 vs 4-16
  '1d12': 6.5,
  '1d10': 5.5,
  '1d8': 4.5,
  '1d6': 3.5,
  '1d4': 2.5,
}

damage_type_weights = {
    'pure': 1.0,
    'magical': .9,
    'positive': .8,
    'divine': .8,
    'negative': .75,
    'sonic': .75,
    'acid': .75,
    'electrical': .65,
    'cold': .65,
    'fire': .65,
    'physical': .65,
    'sneak': .5,
    'massive': .13
}
# damage_type_weights = {
#     'pure': 1.0,
#     'magical': 1.0,
#     'positive': 1.0,
#     'divine': 1.0,
#     'negative': 1.0,
#     'sonic': 1.0,
#     'acid': 1.0,
#     'electrical': 1.0,
#     'cold': 1.0,
#     'fire': 1.0,
#     'physical': 1.0,
#     'sneak': 1.0,
#     'massive': 1.0
# }
weapon_tier_start = {
    'nord': 5.85,
    'green': 5.85,
    'purple': 6.5
}
# 1 simple 2 martial 3 exotic
weapon_feat_weights = {
    1: 1,
    2: 1,
    3: 1.05
}
weapon_feats = {
    1: 'simple',
    2: 'martial',
    3: 'exotic'
}
weapon_size_weights = {
    'l': 1.15,
    'm': 1,
    's': .85,
    't': .85
}
# 1 18-20/2x 2 19-20/2x 3 20/2x 4 20/3x 5 20/4x
weapon_crit_weights = {
    1: .92,
    2: 1,
    3: 1.08,
    4: 1,
    5: .92,
}
weapon_crit_damage = {
  1: [18, 2],
  2: [19, 2],
  3: [20, 2],
  4: [20, 3],
  5: [20, 4],
}
weapon_ugly_weights = {
    1: 1,
    2: 1.05,
}
weapon_monk_weights = {
    1: 1,
    2: .9,
}

# Longsword
weapon_tier_base = {
  'nord': 17.5,
  'green': 22.75,
  'purple': 29.75,
}

def generate_weapon_damage(tier):
  weapon_damage_dict = {}
  for weapon in weapons:
    weapon_info = weapons[weapon]
    weapon_damage = weapon_tier_base[tier]

    weapon_damage *= weapon_size_weights[weapon_info['size']]
    weapon_damage *= weapon_crit_weights[weapon_info['crit']]
    weapon_damage *= weapon_ugly_weights[weapon_info['is_ugly']]
    weapon_damage *= weapon_feat_weights[weapon_info['feat']]
    weapon_damage *= weapon_monk_weights[weapon_info['is_monk']]

    weapon_info['feat'] =  weapon_feats[weapon_info['feat']]
    
    weapon_info['target_damage'] = round(weapon_damage, 2)
    key = f"{weapon_damage:.2f}"
    if key not in weapon_damage_dict:
      weapon_damage_dict[key] = [weapon]
    else:
      weapon_damage_dict[key].append(weapon)
    #print(f"{weapon:<18}", f"{weapon_damage:.2f}")
  weapon_damage_dict = {key: weapon_damage_dict[key] for key in sorted(weapon_damage_dict)}

def calculate_damage(weapon, properties, include_critical = False, is_keen = False, is_imp_crit = False, crit_immune = False):
    weapon_name = weapon
    weapon = weapons[weapon]

    damage = (10 + weapon['base_damage']) * damage_type_weights['physical']
    # Off by 1 for greatersword. 7 * 2 - 1 = 13 not 12 :(
    potential = 10 + (weapon['base_damage'] * 2) -1
    if include_critical and crit_immune:
      include_critical = False
    for property in properties:
      dice1 = property[0]
      dice2 = property[1]
      damage_type = property[2]
      crit_range = 20 - weapon_crit_damage[weapons[weapon_name]['crit']][0] + 1
      crit_multi = weapon_crit_damage[weapons[weapon_name]['crit']][1]
      temp = crit_range
      if is_keen:
        crit_range += temp
      if is_imp_crit:
        crit_range += temp
      if crit_immune and damage_type == 'massive':
        continue
      if dice1 == 0:
        if damage_type == 'massive':
          type_damage = (dice2  * (.05 * crit_range)) * damage_type_weights['physical']
        else:
          potential += dice2
          type_damage = dice2 * damage_type_weights[damage_type]
      else:
        if damage_type == 'massive':
          type_damage = ((dice1 * dice2 - dice1) / 2 + dice1) * (.05 * crit_range) * damage_type_weights['physical']
        else:
          potential += dice2 * dice1
          type_damage = ((dice1 * dice2 - dice1) / 2 + dice1) * damage_type_weights[damage_type]

      damage += type_damage
      #print(str(dice1) + 'd' + str(dice2) ,property[2], round(type_damage, 2))
    
    if include_critical:
      crit_damage = (damage * (crit_multi - 1)) * (.05 * crit_range)
      # print(crit_range, f"{crit_damage:.2f}", f"{damage:.2f}")
      damage += crit_damage
    decrease = 1 - weapon['target_damage']/damage

    weapons[weapon_name]['damage'] = round(damage, 2)
    weapons[weapon_name]['over'] = round(decrease * 100, 2)
    # print(f"{weapon_name:<18}", f"{damage:.2f}", "  Target ", f"{round(weapon['target_damage'], 2):.2f}", ' Potential ', int(potential), '  Over ', f"{decrease * 100:.2f}%")

purple_weapons = {
  'Trident': [[2,8, 'physical'],[9,6, 'fire'], [2,8, 'magical'], [2,8, 'negative'], [2,8, 'massive']],
  'Spear': [[2,12, 'physical'],[2,12, 'acid'],[2,12, 'cold'],[2,12, 'fire'], [2,12, 'electrical']], #
  'Heavy Flail': [[9,6, 'physical'],[2,8, 'negative'],[2,8, 'divine'],[2,8, 'positive']], # 102
  'Greataxe': [[7,6, 'physical'], [2,12, 'divine'], [7,6, 'fire'], [0,10, 'massive']],
  'Halberd': [[9,6, 'physical'],[5,6, 'sneak'],[0,100, 'massive']],
  'Greatsword': [[9,6, 'physical'], [2,12, 'divine'], [2,12, 'fire'], [0,10, 'massive']],
  'Greatsword': [[2,12, 'physical'], [9,6, 'divine'], [2,10, 'fire'], [0,10, 'massive']],
  'Dire Mace': [[11,6, 'physical'],[2,10, 'magical'],[0,25, 'massive']],
  'Club': [[7,6, 'physical'],[8,6, 'acid']],
  'Morningstar': [[2,6, 'physical'],[11,6, 'positive']],
  'Light Flail': [[11,6, 'physical'],[2,8, 'pure'], [0,15, 'massive']],
  'Quarterstaff': [[2,8, 'physical'],[7,6, 'cold'],[7,6, 'fire']],
  'Scythe': [[0,10, 'physical'], [7,6, 'physical'], [2,10, 'negative'],[2,12, 'massive']],
  'Dwarven Waraxe': [[2,8, 'physical'],[2,8, 'sonic'], [2,10, 'positive'], [2,8, 'magical']],
  'Bastard Sword': [[2,12, 'physical'], [1,6, 'sneak'], [2,10, 'divine'], [2,10, 'magical'], [2,8, 'negative']],
  'Two-Bladed Sword': [[7,6, 'physical'],[2,12, 'positive'],[2,12, 'negative'],[0,10, 'massive']],
  'Double Axe': [[12,6, 'physical'],[2,8, 'negative'],[0,20, 'massive']],
  'Katana': [[7,6, 'physical'],[2,12, 'divine'],[2,12, 'fire']],
  'Longsword': [[2,10, 'physical'],[7,6, 'cold'],[2,10, 'magical']],
  'Arrows': [[9,6, 'physical'],[2,12, 'negative'],[2,12, 'magical']], #
  'Bolts': [[9,6, 'physical'],[7,6, 'acid'],[2,6, 'divine']], #
  'Gloves': [[2,4, 'physical'],[2,6, 'acid'],[2,6, 'magical'],[2,6, 'divine']], # doom
  'Bullets': [[9,6, 'physical'],[2,6, 'pure'],[7,6, 'fire']], #
  'Battleaxe': [[2,8, 'physical'],[2,6, 'magical'], [9,6, 'negative']],
  'Warhammer': [[9,6, 'physical'],[2,8, 'negative'],[2,8, 'magical']],
  'Mace': [[2,12, 'physical'],[7,6, 'electrical'], [0,10, 'massive']],
  'Sickle': [[2,12, 'physical'],[2,6, 'divine'],[2,6, 'positive']], # none
  'Whip': [[7,6, 'physical'],[2,8, 'negative'], [2,8, 'acid'], [0,20, 'massive']],
  'Scimitar': [[12,6, 'physical'],[0,30, 'massive']],
  'Rapier': [[2,12, 'physical'],[2,10, 'magical'], [2,10, 'cold'], [0,20, 'massive']],
  'Darts': [[11,6, 'pure']],
  'Throwing Axes': [[2,10, 'physical'],[9,6, 'sonic'], [2,6, 'massive']],
  'Light Hammer': [[4,10, 'physical'],[7,6, 'cold'], [0,10, 'massive']],
  'Handaxe': [[2,10, 'physical'],[2,6, 'negative'], [7,6, 'acid']],
  'Shortsword': [[7,6, 'physical'],[2,8, 'acid'], [2,8, 'negative'], [2,8, 'massive']],
  'Shortsword': [[7,6, 'physical'],[2,8, 'divine'], [2,6, 'pure'], [0,5, 'massive']],
  'Dagger': [[4,6, 'physical'],[2,6, 'divine'],[2,6, 'positive'], [2,6, 'pure']],
  'Dagger': [[2,10, 'physical'],[2,12, 'negative'], [0,50, 'massive']],
  'Shuriken': [[2,12, 'physical'], [5,6, 'sneak'], [2,6, 'negative'], [2,6, 'pure']],
  'Kama': [[2,12, 'physical'],[2,8, 'divine'],[2,8, 'positive'], [0,20, 'massive']],
  'Kukri': [[3,10, 'physical'],[2,10, 'divine'],[2,10, 'magical']]
}

new_purple_weapons = {
  'Trident': [[2,12, 'physical'],[2,12, 'cold'], [2,10, 'magical'], [1,10, 'massive']], # Icy veng
  #'Trident': [[2,12, 'physical'],[2,12, 'fire'], [1,12, 'magical'], [1,12, 'negative']], # Blind on hit, fire immune 20% cold vuln 10$
  'Spear': [[2,6, 'acid'],[2,6, 'cold'],[2,6, 'fire'], [2,6, 'electrical'], [2,8, 'physical']], # freedom
  'Heavy Flail': [[2,10, 'physical'],[2,6, 'negative'],[2,6, 'divine'], [2,6, 'magical']], # None
  'Greataxe': [[2,12, 'physical'], [2,8, 'divine'], [2,12, 'fire']], # vs Undead, immune level drain
  'Halberd': [[2,6, 'sneak'], [2,12, 'physical'], [0,125, 'massive']], # Ahrim's Sacrifice, hold on hit, 43
  #'Greatsword': [[2,12, 'physical'], [2,8, 'divine'], [2,8, 'fire'], [2,12, 'massive']], # deserts light
  'Greatsword': [[2,12, 'physical'], [2,12, 'divine'], [2,6, 'fire']], # tyr 48, lesser 54/58
  'Dire Mace': [[8,6, 'physical'],[2,6, 'magical']], # 10% phys immune
  'Club': [[2,10, 'physical'],[7,6, 'acid']], # acid resist 20, immune level drain
  'Morningstar': [[2,6, 'physical'],[7,6, 'positive'], [1,6, 'massive']], # divine extend, 15% pos immune
  'Light Flail': [[7,6, 'physical'],[2,8, 'pure']], # sunder
  'Quarterstaff': [[2,10, 'physical'],[2,12, 'cold'],[2,12, 'fire']], # 10% fire/cold immune
  'Scythe': [[0,10, 'physical'], [2,10, 'physical'], [2,8, 'negative']], # 43
  'Dwarven Waraxe': [[2,8, 'physical'], [2,10, 'acid'], [2,8, 'negative']], # vs Dragons
  'Bastard Sword': [[2,6, 'physical'], [2,6, 'divine'], [2,6, 'magical'], [2,6, 'negative']], # None
  'Two-Bladed Sword': [[2,12, 'physical'],[2,6, 'positive'],[2,6, 'negative'], [2,8, 'massive']], # +3 AC, on hit doom
  'Double Axe': [[7,6, 'physical'],[1,12, 'negative'], [0,10, 'massive']], # Wounding, vamp regen
  'Katana': [[2,12, 'physical'],[2,6, 'divine'],[2,8, 'sonic'], [1,6, 'massive']], # level drain on hit
  'Longsword': [[2,8, 'physical'],[2,12, 'cold'],[2,6, 'magical']], # Icy Veng, immune death magic
  'Arrows': [[2,12, 'physical'],[2,8, 'negative'],[1,12, 'magical']], #
  'Bolts': [[2,12, 'physical'],[2,8, 'acid'],[1,12, 'magical']], #
  #'Gloves': [[2,8, 'physical'],[2,6, 'pure'],[2,8, 'divine']], # 
  'Gloves': [[2,4, 'physical'],[2,6, 'acid'],[2,6, 'magical'],[2,6, 'divine']], # doom
  'Battleaxe': [[2,8, 'physical'],[2,8, 'magical'], [2,8, 'negative']], # divine resist 5/ 5% immune
  'Warhammer': [[2,8, 'physical'],[2,8, 'positive'],[2,8, 'magical']], # on hit confuse
  'Mace': [[2,12, 'physical'],[2,12, 'electrical'], [1,6, 'pure']], # call Thunder, stun on hit
  'Whip': [[2,6, 'physical'],[2,8, 'positive'], [2,10, 'acid']], # acid rain
  'Sickle': [[2,12, 'physical'],[2,6, 'divine'],[2,6, 'positive']], # none
  'Scimitar': [[7,6, 'physical'],[7,6, 'massive']], # 5% phys immune
  'Rapier': [[2,6, 'physical'],[2,6, 'magical'], [2,6, 'cold'], [0,25, 'massive']], # + pp skill
  'Bullets': [[2,8, 'physical'],[2,6, 'pure'],[2,8, 'fire']], #
  'Darts': [[2,12, 'pure'], [2, 6, 'magical']], # none
  'Throwing Axes': [[7,6, 'sonic'], [1,6, 'massive']], # silence on hit
  'Light Hammer': [[2,10, 'physical'],[2,12, 'cold'], [1,6, 'magical']], # 10% cold 10/ cold
  'Handaxe': [[2,6, 'physical'],[2,6, 'negative'], [2,8, 'acid']], # 10% acid immune, on hit poison 
  'Shortsword': [[2,6, 'physical'],[2,6, 'acid'], [2,6, 'negative'], [2,12, 'massive']], # regen/vampiric
  #'Shortsword': [[2,6, 'physical'],[2,6, 'sonic'], [2,6, 'pure']],
  #'Dagger': [[2,6, 'physical'],[2,4, 'divine'],[2,4, 'acid'], [2,4, 'pure']], # none
  'Dagger': [[2,6, 'physical'],[2,6, 'negative'], [0,60, 'massive']],
  'Shuriken': [[2,6, 'physical'], [2,6, 'sneak'], [2,4, 'negative'], [2,4, 'pure']], # none
  'Kama': [[2,6, 'physical'],[2,6, 'divine'],[2,6, 'positive'], [1,6, 'massive']], # 4 regen
  'Kukri': [[2,6, 'physical'],[2,6, 'divine'],[2,6, 'magical']] # dmg vs alignment
}
new_purple_weapons_property = {
  'Trident': [[2,12, 'physical'],[2,12, 'cold'], [2,10, 'magical'], [1,10, 'massive']], # Icy veng
  #'Trident': [[2,12, 'physical'],[2,12, 'fire'], [1,12, 'magical'], [1,12, 'negative']], # Blind on hit, fire immune 20% cold vuln 10$
  'Spear': [[2,6, 'acid'],[2,6, 'cold'],[2,6, 'fire'], [2,6, 'electrical'], [2,8, 'physical'], [0, .35, 'acid'], [0, .35, 'pure']], # freedom
  'Heavy Flail': [[2,10, 'physical'],[2,6, 'negative'],[2,6, 'divine'], [2,6, 'magical'], [0, 2.5, 'physical']], # None
  'Greataxe': [[2,12, 'physical'], [2,8, 'divine'], [2,12, 'fire'], [2,8, 'physical']], # vs Undead, immune level drain
  'Halberd': [[2,6, 'sneak'], [2,12, 'physical'], [0,100, 'massive'],  [0, .775, 'fire'], [0, .775, 'pure']], # Ahrim's Sacrifice, hold on hit, 43
  'Greatsword': [[2,12, 'physical'], [2,8, 'divine'], [2,8, 'fire'], [2,12, 'massive'], [1, 6, 'pure']], # deserts light
  #'Greatsword': [[2,12, 'physical'], [2,12, 'divine'], [2,6, 'fire']], # tyr 48, lesser 54/58
  'Dire Mace': [[8,6, 'physical'],[2,6, 'magical']], # 10% phys immune
  'Club': [[2,10, 'physical'],[7,6, 'acid']], # acid resist 20, immune level drain
  'Morningstar': [[2,6, 'physical'],[7,6, 'positive'], [1,6, 'massive']], # divine extend, 15% pos immune
  'Light Flail': [[7,6, 'physical'],[2,8, 'pure']], # sunder
  'Quarterstaff': [[2,10, 'physical'],[2,12, 'cold'],[2,12, 'fire']], # 10% fire/cold immune
  'Scythe': [[0,10, 'physical'], [2,10, 'physical'], [2,8, 'negative']], # 43
  'Dwarven Waraxe': [[2,8, 'physical'], [2,10, 'acid'], [2,8, 'negative'], [2, 6, 'pure'], [0, 2, 'physical']], # vs Dragons
  'Bastard Sword': [[2,6, 'physical'], [2,6, 'divine'], [2,6, 'magical'], [2,6, 'negative'], [1, 6, 'sneak']], # None
  'Two-Bladed Sword': [[2,12, 'physical'],[2,6, 'positive'],[2,6, 'negative'], [2,8, 'massive']], # +3 AC, on hit doom
  'Double Axe': [[7,6, 'physical'],[1,12, 'negative'], [0,10, 'massive']], # Wounding, vamp regen
  'Katana': [[2,12, 'physical'],[2,6, 'divine'],[2,8, 'sonic'], [0, 1.05, 'fire']], # level drain on hit
  'Longsword': [[2,8, 'physical'],[2,12, 'cold'],[2,6, 'magical']], # Icy Veng, immune death magic
  'Arrows': [[2,12, 'physical'],[2,8, 'negative'],[1,12, 'magical']], #
  'Bolts': [[2,12, 'physical'],[2,8, 'acid'],[1,12, 'magical']], #
  'Gloves': [[2,8, 'physical'],[2,6, 'pure'],[2,8, 'divine'], [1, 6, 'sneak']], # 
  #'Gloves': [[2,4, 'physical'],[2,6, 'acid'],[2,6, 'magical'],[2,6, 'divine']], # doom
  'Battleaxe': [[2,8, 'physical'],[2,8, 'magical'], [2,8, 'negative']], # divine resist 5/ 5% immune
  'Warhammer': [[2,8, 'physical'],[2,8, 'positive'],[2,8, 'magical']], # on hit confuse
  'Mace': [[2,12, 'physical'],[2,12, 'electrical'], [1,6, 'pure'], [0, .35, 'electrical'], [0, .35, 'pure']], # call Thunder, stun on hit
  'Whip': [[2,6, 'physical'],[2,8, 'positive'], [2,10, 'acid'], [0, 1.2, 'acid']], # acid rain
  'Sickle': [[2,12, 'physical'],[2,6, 'divine'],[2,6, 'positive']], # none
  'Scimitar': [[7,6, 'physical'],[7,6, 'massive']], # 5% phys immune
  'Rapier': [[2,6, 'physical'],[2,6, 'magical'], [2,6, 'cold'], [0,25, 'massive']], # + pp skill
  'Bullets': [[2,8, 'physical'],[2,6, 'pure'],[2,8, 'fire']], #
  'Darts': [[2,12, 'pure'], [2, 6, 'magical'], [0, 1.2, 'pure']], # none
  'Throwing Axes': [[7,6, 'sonic'], [1,6, 'massive']], # silence on hit
  'Light Hammer': [[2,10, 'physical'],[2,12, 'cold'], [1,6, 'magical']], # 10% cold 10/ cold
  'Handaxe': [[2,6, 'physical'],[2,6, 'negative'], [2,8, 'acid'], [0, .35, 'acid'], [0, .35, 'pure']], # 10% acid immune, on hit poison 
  'Shortsword': [[2,6, 'physical'],[2,6, 'acid'], [2,6, 'negative'], [2,12, 'massive']], # regen/vampiric
  #'Shortsword': [[2,6, 'physical'],[2,6, 'sonic'], [2,6, 'pure']],
  #'Dagger': [[2,6, 'physical'],[2,4, 'divine'],[2,4, 'acid'], [2,4, 'pure'], [0, 3, 'physical']], # none
  'Dagger': [[2,6, 'physical'],[2,6, 'negative'], [0,60, 'massive']],
  'Shuriken': [[2,6, 'physical'], [2,6, 'sneak'], [2,4, 'negative'], [2,4, 'pure']], # none
  'Kama': [[2,6, 'physical'],[2,6, 'divine'],[2,6, 'positive'], [1,6, 'massive']], # 4 regen
  'Kukri': [[2,6, 'physical'],[2,6, 'divine'],[2,6, 'magical'], [1, 4, 'positive']] # dmg vs alignment
}

generate_weapon_damage('purple')
for weapon in new_purple_weapons:
  #calculate_damage(weapon, purple_weapons[weapon])
  calculate_damage(weapon, new_purple_weapons[weapon], False, True, True, False)
  weapon_properties = []

  for property in new_purple_weapons[weapon]:
    weapon_properties.append(str(property[0]) + 'D' + str(property[1]) + " " + property[2])
  
  weapons[weapon]['properties'] = weapon_properties
  #calculate_damage(weapon, new_purple_weapons_property[weapon], False, True, True, True)

# # Uncomment to print each weapon with their damage types. 
# for weapon in dict(sorted(weapons.items(), key = lambda x: x[1]["damage"], reverse=True)):
#   print(f"{weapon:<18}", "Damage:",f"{weapons[weapon]['damage']:.2f}", "Target:", f"{weapons[weapon]['target_damage']:.2f}", "Over:", f"{100 *(1 - weapons[weapon]['target_damage']/weapons[weapon]['damage']):.2f}%")
#   # for property in new_purple_weapons[weapon]:
#   #   print(property)
#   # print()


